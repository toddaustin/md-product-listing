function nonDiscountTotal(){for(var t=0,e=0;e<cartItem.length;e++){var a=parseInt(cartItem[e].nextElementSibling.value),n=parseFloat(items[cartItem[e].textContent]);t+=parseFloat(n*a)}return t.toFixed(2)}function updateCartCount(){for(var t=0,e=0,a=0;a<cartQty.length;a++)t+=parseInt(cartQty[a].value),e+=parseFloat(cartItemPrice[a].innerHTML.slice(1));document.getElementsByClassName("cart-count")[0].innerHTML=t,cartTotal[0].innerHTML="$"+e.toFixed(2)}function removeItemFromCart(t){t.remove(),updateCartCount()}function addItem(){for(var t=0;t<addToCart.length;t++)addToCart[t].addEventListener("click",function(){for(var t=cartCont[0].children.length,e=this.parentElement.firstElementChild.firstElementChild.textContent,a=items[e],n=this.previousElementSibling.firstElementChild.value,t=cartCont[0].children,r=!1,o=2;o<t.length;o++){var l=t[o].firstElementChild;if(l.textContent===e){var i=parseInt(l.nextElementSibling.value);i+=parseInt(n),l.nextElementSibling.value=i,l.nextElementSibling.nextElementSibling.textContent="$"+parseFloat(i*a).toFixed(2),r=!0}}if(!r){var s=(a*n).toFixed(2),c=document.createElement("p");c.innerHTML='<span class="item">'+e+'</span> <input class="qty" value='+n+'> <span class="cart-price">$'+s+'</span><button class="remove">Remove</button>',cartCont[0].appendChild(c)}removeItem(),updateCartCount(),updateItemQty()})}function removeItem(){for(var t=0;t<removeFromCart.length;t++)removeFromCart[t].addEventListener("click",function(){var t=this.parentElement;removeItemFromCart(t)})}function updateItemQty(){for(var t=0;t<cartQty.length;t++)cartQty[t].addEventListener("change",function(){var t=this.parentElement,e=t.firstElementChild.innerHTML,a=t.getElementsByClassName("cart-price"),n=items[e],r=this.value;if(0==r)removeItemFromCart(t);else{var o=parseFloat(n*r);a[0].innerHTML="$"+o.toFixed(2),updateCartCount()}})}function applyPromo(){promo.addEventListener("click",function(){var t=nonDiscountTotal(),e=this.previousElementSibling.value.toLowerCase();if(""!==e){updateCartCount();for(var a=cartCont[0].children,n=0,r=0;r<a.length;r++){var o=a[r].firstChild.textContent;items[o]>=n&&(n=parseFloat(items[o]))}if("10off"===e){var l=parseFloat(.1*n).toFixed(2),i=parseFloat((cartTotal[0].textContent.slice(1)-l).toFixed(2));console.log(typeof i),parseFloat(cartTotal[0].textContent.slice(1))>i?(cartTotal[0].textContent="$"+i.toFixed(2),n=0,this.previousElementSibling.value=""):alert("You currently have the best price.")}else if("train15"===e){for(var s=0,c=0,m=0;m<a.length;m++){var o=a[m].firstChild.textContent;if("Train"===o){c=parseInt(a[m].firstChild.nextElementSibling.value);var d=parseFloat(.15*items.Train).toFixed(2);s=c*d,currentTrainTotal=parseFloat(items.Train*c),a[m].firstChild.nextElementSibling.nextElementSibling.textContent="$"+(currentTrainTotal-parseFloat(s.toFixed(2)))}}if(0!==c){for(var u=0,C=0;C<cartItemPrice.length;C++)u+=parseFloat(cartItemPrice[C].textContent.slice(1)).toFixed(2);u=parseFloat(u),cartTotal[0].textContent.slice(1)>u?(cartTotal[0].textContent="$"+u,n=0,this.previousElementSibling.value=""):alert("You currently have the best price.")}else alert("Promo code not valid for items in cart");updateCartCount()}else"5offtotal"===e?(updateCartCount(),cartTotal[0].textContent="$"+parseFloat(cartTotal[0].textContent.slice(1)-.05*cartTotal[0].textContent.slice(1)).toFixed(2)):alert("Promo code is invalid")}})}var items={Train:"18.95",BulletTime:"15.95",Klutz:"13.95",Global:"13.95",Blunt:"15.95",Crowd:"17.95",Banksy:"18.95",Pico:"17.95",Hex:"17.95",Byte:"18.95"},addToCart=document.getElementsByClassName("add"),removeFromCart=document.getElementsByClassName("remove"),cartCont=document.getElementsByClassName("tooltip-text"),cartQty=document.getElementsByClassName("qty"),cartItem=document.getElementsByClassName("item"),cartItemPrice=document.getElementsByClassName("cart-price"),cartTotal=document.getElementsByClassName("amount"),promo=document.getElementById("apply-code");addItem(),removeItem(),applyPromo();var cart={updateQty:function(){for(var t=0,e=0;e<cartQty.length;e++)t+=parseInt(cartQty[e].value);return t},updateCartTotal:function(){for(var t=0;t<cartQty.length;t++)totalVal+=parseFloat(cartItemPrice[t].innerHTML.slice(1))},addToCart2:function(){}};